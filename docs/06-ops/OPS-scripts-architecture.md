# ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚¬ã‚¤ãƒ‰

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¨è²¬å‹™

```
revolution/
â”œâ”€â”€ scripts/                    # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆå®Ÿä½“ï¼‰
â”‚   â”œâ”€â”€ deploy.sh               # Cloud Run ãƒ‡ãƒ—ãƒ­ã‚¤
â”‚   â”œâ”€â”€ generate-wp-secrets.sh  # Secret Manager è¨­å®š
â”‚   â””â”€â”€ setup-wordpress.sh      # WordPress åˆæœŸè¨­å®šï¼ˆçµ±åˆç‰ˆï¼‰â€»å®Ÿä½“
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ backend/
â”‚   â”‚   â”œâ”€â”€ Dockerfile          # ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å‚ç…§
â”‚   â”‚   â””â”€â”€ setup-wordpress.sh  # â†’ ../../scripts/setup-wordpress.sh ã¸ã®ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯
â”‚   â””â”€â”€ frontend/
â””â”€â”€ docs/

```

## ğŸ¯ è¨­è¨ˆåŸå‰‡

### 1. **å˜ä¸€è²¬ä»»ã®åŸå‰‡**

- `scripts/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå…¨ã¦ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç®¡ç†
- å„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å›ºæœ‰ã®ã‚³ãƒ¼ãƒ‰ã®ã¿

### 2. **DRYåŸå‰‡ï¼ˆDon't Repeat Yourselfï¼‰**

- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä¸€ç®‡æ‰€ã«é›†ç´„
- ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹æŒ™å‹•ã®åˆ‡ã‚Šæ›¿ãˆ

### 3. **Discovery**

- æ–°è¦å‚åŠ è€…ãŒã€Œscripts/ã€ã‚’è¦‹ã‚Œã°å…¨ã¦ã®æ“ä½œãŒã‚ã‹ã‚‹
- ä¸€è²«ã—ãŸå‘½åè¦å‰‡ï¼ˆå‹•è©-åè©.shï¼‰

## ğŸ”„ ç§»è¡Œæ‰‹é †

### Step 1: æ—¢å­˜ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
```bash
# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
cp apps/backend/install-plugins.sh apps/backend/install-plugins.sh.bak
cp apps/backend/setup-graphql.sh apps/backend/setup-graphql.sh.bak
```

### Step 2: çµ±åˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œ
```bash
# WordPress ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆé–‹ç™ºç’°å¢ƒï¼‰
WP_ENV=development ./scripts/setup-wordpress.sh

# WordPress ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
WP_ENV=production ./scripts/setup-wordpress.sh
```

### Step 3: å¤ã„ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å‰Šé™¤
```bash
# å‹•ä½œç¢ºèªå¾Œã«å‰Šé™¤
rm apps/backend/install-plugins.sh
rm apps/backend/setup-graphql.sh
rm apps/backend/*.sh.bak
```

## ğŸš€ ä½¿ç”¨ä¾‹

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã®æ§‹ç¯‰
```bash
# 1. WordPress ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
./scripts/setup-wordpress.sh

# 2. Docker èµ·å‹•
cd apps/backend
docker-compose up -d

# 3. ç¢ºèª
open http://localhost:8080
```

### æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# 1. ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç”Ÿæˆ
./scripts/generate-wp-secrets.sh

# 2. ãƒ‡ãƒ—ãƒ­ã‚¤
./scripts/deploy.sh
```

## ğŸ“‹ ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¸€è¦§ã¨ç”¨é€”

| ã‚¹ã‚¯ãƒªãƒ—ãƒˆ | ç”¨é€” | å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚° |
|----------|------|--------------|
| `scripts/deploy.sh` | Cloud Run ãƒ‡ãƒ—ãƒ­ã‚¤ | æœ¬ç•ªãƒªãƒªãƒ¼ã‚¹æ™‚ |
| `scripts/generate-wp-secrets.sh` | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚­ãƒ¼ç”Ÿæˆ | åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ™‚ |
| `scripts/setup-wordpress.sh` | WPç’°å¢ƒæ§‹ç¯‰ | é–‹ç™ºç’°å¢ƒæ§‹ç¯‰æ™‚ãƒ»Dockerãƒ“ãƒ«ãƒ‰æ™‚ |

## âš ï¸ æ³¨æ„äº‹é …

1. **Dockerfile ã§ã®å‚ç…§**
   - Docker ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®åˆ¶ç´„ã«ã‚ˆã‚Šã€è¦ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å‚ç…§ã«åˆ¶é™ã‚ã‚Š
   - å¿…è¦ã«å¿œã˜ã¦ãƒ“ãƒ«ãƒ‰ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’èª¿æ•´

2. **ç’°å¢ƒå¤‰æ•°**
   - `WP_ENV`: development | production | staging
   - `BACKEND_DIR`: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: apps/backendï¼‰

3. **æ¨©é™ç®¡ç†**
   - ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã¯å®Ÿè¡Œæ¨©é™ãŒå¿…è¦ï¼ˆ`chmod +x`ï¼‰
   - Docker å†…ã§ã¯ www-data ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã®å®Ÿè¡Œã‚’è€ƒæ…®

## ğŸ¯ æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

1. **ä¿å®ˆæ€§å‘ä¸Š**: ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å ´æ‰€ãŒæ˜ç¢º
2. **å†åˆ©ç”¨æ€§**: CI/CD ã§ã®æ´»ç”¨ãŒå®¹æ˜“
3. **ä¸€è²«æ€§**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã§çµ±ä¸€ã•ã‚ŒãŸæ§‹é€ 
4. **åŠ¹ç‡æ€§**: é‡è¤‡ã‚³ãƒ¼ãƒ‰ã®å‰Šæ¸›
