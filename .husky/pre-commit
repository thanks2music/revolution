#!/bin/sh

# gitleaks „Åß„Ç∑„Éº„ÇØ„É¨„ÉÉ„Éà„Çπ„Ç≠„É£„É≥Ôºà„Çπ„ÉÜ„Éº„Ç∏„É≥„Ç∞„Éï„Ç°„Ç§„É´„ÅÆ„ÅøÔºâ
# CIÁí∞Â¢É„Å™„Å© gitleaks „Åå„Ç§„É≥„Çπ„Éà„Éº„É´„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà„ÅØ„Çπ„Ç≠„ÉÉ„Éó

# gitleaks „Åå„Ç§„É≥„Çπ„Éà„Éº„É´„Åï„Çå„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç
if ! command -v gitleaks >/dev/null 2>&1; then
  echo "‚è≠Ô∏è  gitleaks not found, skipping secret scan (install with: brew install gitleaks)"
  exit 0
fi

echo "üîç Scanning staged files for secrets..."

if ! gitleaks protect --staged --config .gitleaks.toml; then
  echo ""
  echo "‚ùå gitleaks detected potential secrets in staged files!"
  echo "   Please review the findings above and remove any secrets before committing."
  echo ""
  echo "   To bypass this check (use with caution):"
  echo "   git commit --no-verify"
  echo ""
  exit 1
fi

echo "‚úÖ No secrets detected"
