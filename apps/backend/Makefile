# Revolution Backend Makefile
# WordPress Dockerç’°å¢ƒã®ç®¡ç†

.PHONY: sync-scripts build up down logs clean

# ã‚¹ã‚¯ãƒªãƒ—ãƒˆåŒæœŸ
sync-scripts:
	@echo "ğŸ“„ Syncing scripts from ../../scripts/"
	cp ../../scripts/setup-wordpress.sh ./setup-wordpress.sh
	chmod +x ./setup-wordpress.sh
	@echo "âœ… Scripts synced successfully"

# Dockerãƒ“ãƒ«ãƒ‰ï¼ˆã‚¹ã‚¯ãƒªãƒ—ãƒˆåŒæœŸä»˜ãï¼‰
build: sync-scripts
	@echo "ğŸ”¨ Building Docker image with latest scripts..."
	docker-compose build --no-cache
	@echo "âœ… Build completed"

# èµ·å‹•
up: build
	@echo "ğŸš€ Starting WordPress environment..."
	docker-compose up -d
	@echo "âœ… WordPress available at http://localhost:8080"

# åœæ­¢(ãƒ‡ãƒ¼ã‚¿ã¯å¼•ãç¶™ã)
stop:
	@echo "ğŸ›‘ Stopping WordPress environment..."
	docker-compose stop

# åœæ­¢(ãƒ‡ãƒ¼ã‚¿ã‚‚æ¶ˆãˆã‚‹)
down:
	@echo "ğŸ›‘ Stopping WordPress environment..."
	docker-compose down

# ãƒ­ã‚°è¡¨ç¤º
logs:
	docker-compose logs -f

# å®Œå…¨ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
clean:
	@echo "ğŸ§¹ Cleaning up Docker resources..."
	docker-compose down -v
	docker image prune -f
	@echo "âœ… Cleanup completed"

# ãƒ˜ãƒ«ãƒ—
help:
	@echo "Available commands:"
	@echo "  make sync-scripts  - Sync scripts from ../../scripts/"
	@echo "  make build        - Build Docker image with latest scripts"
	@echo "  make up           - Build and start WordPress environment"
	@echo "  make down         - Stop WordPress environment"
	@echo "  make logs         - Show container logs"
	@echo "  make clean        - Clean up all Docker resources"
